---
title: 绘图
date: 2018-11-04 11:13:25
categories:
- 客户端
tags:
---

GDI原理

图形显示主要由动态链接库GDI32.DLL中导出的函数处理，这些动态链接库会调用你安装的视频显示器和打印机的设备驱动程序中的一些函数。各种各样的显示设备都可以与PC兼容机连接。因此，GDI的一个主要目的就是支持与设备无关的图形。GDI提供了一种特殊的机制来彻底隔离应用程序和不同输出设备的特性，这样就可以支持与设备无关的图形。
GDI函数的调用

GDI包含有几百个函数，可以分成下面几大类

获取和释放设备环境的函数

获取设备环境信息的函数

绘图函数

设置和获取设备环境属性的函数

使用GDI"对象"的函数


GDI的基本图形

线条和曲线

可被填充的封闭区域

位图

文本


其他

映射模式和转换

图元文件

区域

路径

剪裁

调色板

打印


设备环境

如果希望在图形输出设备上绘制图形，必须首先获取设备环境的句柄。

GetDC

有时候，仅需要获取一下关于设备环境的信息，而不需要在上面绘制任何东西。

CreateIC

CreateCimpatibleDC内存设备环境


保存设备环境

通常，当调用GetDC或者BeginPaint函数时，Windows返回一个设备环境，它的所有属性都被设定为默认值。当设备环境调用ReleaseDC或者EndPaint函数时，对属性所做的任何改变都会丢失。如果程序需要使用非默认的设备环境属性，则必须在每次获取一个新的设备环境句柄时初始化这个设备环境。

我们可以通过SaveDC来保存设备环境状态。