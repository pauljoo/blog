---
title: 汇编语言-基础知识
date: 2018-11-16 20:04:09
categories:
- 语言
tags:
- 汇编语言
---

机器语言是机器指令的集合。电子计算机的机器指令是一列二进制数字，计算机将之转变为一列高低电平，以使计算机的电子器件受到驱动，进行运算。

汇编语言的主体是汇编指令。汇编指令是机器指令便于记忆的书写格式。然后由汇编编译器将其编译为机器码，由计算机最终执行。

例如：
操作：寄存器BX的内容送到AX中
机器指令：1000100111011000
汇编指令：mov ax,bx

汇编语言发展至今，由以下3类指令组成。
- 汇编指令：机器码的助记符，有对应的机器码。
- 伪指令：没有对应的机器码，由编译器执行，计算机并不执行。
- 其他符号：如：+、-、*、/等，由编译器识别，没有对应的机器码。

## 寄存器
一个典型的CPU由运算器、控制器、寄存器等器件构成，这些器件靠内部总线相连。

对于一个汇编程序员来说，CPU中的主要部件是寄存器。寄存器是CPU中程序员可以用指令读写的部件。通过改变各种寄存器中的内容来实现对CPU的控制。

不同的CPU，寄存器的个数、结构是不相同的。8086CPU有14个寄存器，每个寄存器有一个名称。8086CPU的所有寄存器都是16位的，可以存放两个字节。这些寄存器是：AX,BX,CX,DX,SI,DI,SP,BP,IP,CS,SS,DS,ES,PSW。

### 通用寄存器
AX,BX,CX,DX四个寄存器通常用来存放一般性的数据，被称为通用寄存器。

```
mov ax,18
add ax,8
mov ax,bx
```
### 段寄存器
8086CPU有4个段寄存器：CS,DS,SS,ES。

8086CPU在访问内存时要由相关部件提供内存单元的段地址和偏移地址，送入地址加法器合成物理地址。

```
# jmp 段地址：偏移地址
jmp 2AE3:3
```
#### CS和IP
CS和IP指示了CPU当前要读取指令的地址。CS为代码段寄存器，IP为指令指针寄存器。

#### DS
8086CPU中有一个DS寄存器，通常用来存放要访问数据的段地址。
```
mov bx,1000H
mov ds,bx
mov al,[0]
```
[0]中的0表示内存单元的偏移地址。内存单元的段地址自动取DS中的数据为内存单元的段地址。同时，不能直接将数据送入段寄存器，必须通过另外一个寄存器来进行中转，例如这里的bx。

#### SS和SP
8086CPU中，有两个寄存器，段寄存器SS和寄存器SP，栈顶的段地址存放在SS中，偏移地址存放在SP中。

### 整理
通过将指令放入CS和IP中，交由CPU执行指令，将数据在AX和BX进行中转，再经DS放回到内存中。
## Degbug
Debug是DOS、Windows都提供的实模式程序的调试工具。使用它，可以查看CPU各种寄存器中的内容、内存的情况和在机器码级跟踪程序的运行。

### 进入Debug

开始>运行>command>debug

### Debug常用命令

- R命令：查看、修改CPU中寄存器的值
- D命令：查看内存中的内容
- E命令：改写内存中的内容
- U命令：查看机器码对应的汇编指令
- T命令：执行当前指令
- A命令：以汇编指令的形式在内存中写入机器指令